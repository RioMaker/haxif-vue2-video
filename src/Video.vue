<!-- 传入值说明 -->
<!--  
slot插入属性
| 支持传入组件形式
| 传入格式：
|   <template #title>
|    组件内容....
|   </template>
传入值属性
>>props:
| speeds: {
|       type: Array,
|       default: () => {
|       return ["2.0", "1.5", "1.0", "0.5", "0.25"];
| },
| title:{
|      type:String,
|      default:()=>{
|        return ''
|      }
| },
| festival:{
|      type:String,
|      default:()=>{
|        return 'Spring Festival'
|      }
| },
-->
<!-- slot插入source资源其src指向资源地址 -->
<template>
  <div class="main">
    <div class="header">
      <slot name="title">
        <div>
          <h1 class="title-txt">
            {{ title }}
          </h1>
        </div>
      </slot>
    </div>
    <div class="video-box" ref="videobox">
      <!-- 视频插入 -->
      <div
        :class="is_full_screen == true ? 'full-video' : 'video'"
        @click.stop="keyDown"
      >
        <img class="loading-img" v-if="is_loading" src="https://i.loli.net/2021/01/24/lJ2KEBHGXDItqLs.gif" />
        <video
          ref="xvideo"
          @canplay="getTotal"
          @timeupdate="timeupdate"
          @waiting="isLoading"
        >
          <slot>
            <source :src="url" />
          </slot>
        </video>
      </div>
      <!-- 控制器 -->
      <div
        class="controls"
        @mouseleave="thumbUp"
        @mousemove="thumbMove"
        @mouseup="thumbUp"
        @keyup.space.prevent="keyDown('Space')"
        @keyup.right.prevent="keyDown('Right')"
        @keyup.left.prevent="keyDown('Left')"
        @keyup.up.prevent="keyDown('Up')"
        @keyup.down.prevent="keyDown('Down')"
        @click="focusIn('controls')"
        @keydown.prevent
        ref="controls"
        tabindex="0"
      >
        <!-- 进度条 -->
        <div class="controls-bottom-process">
          <span class="controls-bottom-process-time">{{ currentTime }}</span>
          <div class="controls-bottom-process-in" @click.stop="thumbClick">
            <div class="process-rate" ref="process">
              <div
                class="process-rate-in"
                :style="{ '--process-rate': process }"
              ></div>
            </div>
            <div
              class="process-thumb"
              :style="{ left: process }"
              @mousedown.stop="thumbDown"
              @click.stop=""
            >
              <div style="transform: translate(0, -5px)">
                <!-- 小电视 -->
                <template v-if="getFestival('bilibili')">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 18 18"
                    width="18"
                    height="18"
                    preserveAspectRatio="xMidYMid meet"
                    style="width: 100%; height: 100%; transform: translate3d(0px, 0px, 0px);"
                  >
                    <defs>
                      <clipPath id="__lottie_element_36">
                        <rect width="18" height="18" x="0" y="0"></rect>
                      </clipPath>
                    </defs>
                    <g clip-path="url(#__lottie_element_36)">
                      <g
                        transform="matrix(1,0,0,1,8.937000274658203,8.25)"
                        opacity="0.14"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(1,0,0,1,0.07500000298023224,1.2130000591278076)"
                        >
                          <path
                            fill="rgb(251,114,153)"
                            fill-opacity="1"
                            d=" M9,-3.5 C9,-3.5 9,3.5 9,3.5 C9,5.707600116729736 7.207600116729736,7.5 5,7.5 C5,7.5 -5,7.5 -5,7.5 C-7.207600116729736,7.5 -9,5.707600116729736 -9,3.5 C-9,3.5 -9,-3.5 -9,-3.5 C-9,-5.707600116729736 -7.207600116729736,-7.5 -5,-7.5 C-5,-7.5 5,-7.5 5,-7.5 C7.207600116729736,-7.5 9,-5.707600116729736 9,-3.5z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(1,0,0,1,9.140999794006348,8.67199993133545)"
                        opacity="0.28"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(1,0,0,1,-0.1509999930858612,0.7990000247955322)"
                        >
                          <path
                            fill="rgb(251,114,153)"
                            fill-opacity="1"
                            d=" M8,-3 C8,-3 8,3 8,3 C8,4.931650161743164 6.431650161743164,6.5 4.5,6.5 C4.5,6.5 -4.5,6.5 -4.5,6.5 C-6.431650161743164,6.5 -8,4.931650161743164 -8,3 C-8,3 -8,-3 -8,-3 C-8,-4.931650161743164 -6.431650161743164,-6.5 -4.5,-6.5 C-4.5,-6.5 4.5,-6.5 4.5,-6.5 C6.431650161743164,-6.5 8,-4.931650161743164 8,-3z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(0.9883429408073425,-0.7275781631469727,0.6775955557823181,0.920446515083313,7.3224687576293945,-0.7606706619262695)"
                        opacity="1"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(0.9937776327133179,-0.11138220876455307,0.11138220876455307,0.9937776327133179,-2.5239999294281006,1.3849999904632568)"
                        >
                          <path
                            fill="rgb(0,0,0)"
                            fill-opacity="1"
                            d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(1.1436611413955688,0.7535901665687561,-0.6317168474197388,0.9587040543556213,16.0070743560791,2.902894973754883)"
                        opacity="1"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(0.992861807346344,0.1192704513669014,-0.1192704513669014,0.992861807346344,-2.5239999294281006,1.3849999904632568)"
                        >
                          <path
                            fill="rgb(0,0,0)"
                            fill-opacity="1"
                            d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(1,0,0,1,8.890999794006348,8.406000137329102)"
                        opacity="1"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(1,0,0,1,0.09099999815225601,1.1009999513626099)"
                        >
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(0,0,0)"
                            stroke-opacity="1"
                            stroke-width="1.5"
                            d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(1,0,0,1,8.89900016784668,8.083999633789062)"
                        opacity="1"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"
                        >
                          <path
                            fill="rgb(0,0,0)"
                            fill-opacity="1"
                            d=" M0.875,-1.125 C0.875,-1.125 0.875,1.125 0.875,1.125 C0.875,1.607912540435791 0.48291251063346863,2 0,2 C0,2 0,2 0,2 C-0.48291251063346863,2 -0.875,1.607912540435791 -0.875,1.125 C-0.875,1.125 -0.875,-1.125 -0.875,-1.125 C-0.875,-1.607912540435791 -0.48291251063346863,-2 0,-2 C0,-2 0,-2 0,-2 C0.48291251063346863,-2 0.875,-1.607912540435791 0.875,-1.125z"
                          ></path>
                        </g>
                      </g>
                      <g
                        transform="matrix(1,0,0,1,14.008999824523926,8.083999633789062)"
                        opacity="1"
                        style="display: block;"
                      >
                        <g
                          opacity="1"
                          transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"
                        >
                          <path
                            fill="rgb(0,0,0)"
                            fill-opacity="1"
                            d=" M0.8999999761581421,-1.100000023841858 C0.8999999761581421,-1.100000023841858 0.8999999761581421,1.100000023841858 0.8999999761581421,1.100000023841858 C0.8999999761581421,1.596709966659546 0.4967099726200104,2 0,2 C0,2 0,2 0,2 C-0.4967099726200104,2 -0.8999999761581421,1.596709966659546 -0.8999999761581421,1.100000023841858 C-0.8999999761581421,1.100000023841858 -0.8999999761581421,-1.100000023841858 -0.8999999761581421,-1.100000023841858 C-0.8999999761581421,-1.596709966659546 -0.4967099726200104,-2 0,-2 C0,-2 0,-2 0,-2 C0.4967099726200104,-2 0.8999999761581421,-1.596709966659546 0.8999999761581421,-1.100000023841858z"
                          ></path>
                        </g>
                      </g>
                    </g>
                  </svg> 
                </template>
                <!-- Bug图标 -->
                <template v-if="getFestival('Bug')">
                  <svg
                    t="1611324413693"
                    class="icon"
                    viewBox="0 0 1582 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="6751"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="28"
                    height="28"
                  >
                    <path
                      d="M1489.454545 0v93.090909h93.09091v837.818182h-93.09091v93.090909H93.090909v-93.090909H0V93.090909h93.090909V0h1396.363636z"
                      fill="#F85E5E"
                      p-id="6752"
                    ></path>
                    <path
                      d="M558.545455 744.727273H279.272727V279.272727h279.272728v465.454546zM465.454545 651.636364V558.545455H372.363636v93.090909h93.090909z m0-186.181819V372.363636H372.363636v93.090909h93.090909zM930.909091 744.727273H651.636364V279.272727h93.090909v372.363637h93.090909V279.272727h93.090909v465.454546zM1303.272727 744.727273h-279.272727V279.272727h279.272727v93.090909h-186.181818v279.272728h93.090909V465.454545h93.090909v279.272728z"
                      fill="#FFFFFF"
                      p-id="6753"
                    ></path>
                  </svg> 
                </template>
                <!--  -->
                <template v-if="getFestival('Spring Festival')">
                  <svg
                    t="1611427608962"
                    class="icon"
                    viewBox="0 0 1024 1024"
                    version="1.1"
                    xmlns="http://www.w3.org/2000/svg"
                    p-id="8736"
                    xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="32"
                    height="32"
                  >
                    <path
                      d="M457.665918 982.912037L41.187933 566.334082c-29.891243-29.891243-29.891243-78.776921 0-108.468222L457.665918 41.387875c29.891243-29.891243 78.67695-29.891243 108.468222 0L982.712096 457.86586c29.891243 29.891243 29.891243 78.776921 0 108.468222L566.334082 983.012008c-29.891243 29.791272-78.776921 29.791272-108.668164-0.099971z m0 0"
                      fill="#CA3A2A"
                      p-id="8737"
                    ></path>
                    <path
                      d="M512.049985 1024c-24.392854 0-48.885678-9.297276-67.48023-27.891829L28.09177 579.630186c-37.189105-37.189105-37.189105-97.671385 0-134.86049L444.569755 28.09177c37.189105-37.189105 97.671385-37.189105 134.86049 0l416.477985 416.477985c37.189105 37.189105 37.189105 97.671385 0 134.86049L579.430245 996.108171c-18.594552 18.594552-42.987406 27.891829-67.38026 27.891829z m0-986.510983c-14.895636 0-29.791272 5.698331-41.187933 16.995021L54.384067 470.962023c-22.693352 22.693352-22.693352 59.582544 0 82.175925L470.862052 969.715904c22.693352 22.693352 59.582544 22.693352 82.175925 0l416.477985-416.477985c22.693352-22.693352 22.693352-59.582544 0-82.175925L553.037977 54.484038c-11.29669-11.396661-26.192326-16.995021-40.987992-16.995021z m0 0"
                      fill="#CA3A2A"
                      p-id="8738"
                    ></path>
                    <path
                      d="M864.346773 475.060822L549.039149 159.653227c-9.79713-9.8971-22.993264-15.295519-36.989164-15.295519s-27.092063 5.398418-36.989163 15.295519L159.553256 475.060822c-20.394025 20.394025-20.394025 53.684272 0 74.178268L475.060822 864.746656c10.097042 10.197013 23.693059 15.295519 36.989163 15.295519 13.396075 0 26.892121-5.098506 36.989164-15.295519l315.307624-315.707507c9.8971-9.79713 15.295519-22.993264 15.295519-36.989164s-5.398418-27.192034-15.295519-36.989163z m-12.996192 45.486674l-330.903056 330.903056c-4.398711 4.598653-12.096456 4.598653-16.695109 0l-331.003026-330.903056c-4.598653-4.498682-4.598653-12.096456 0-16.695109l331.003026-331.003026c2.999121-2.999121 6.498096-3.399004 8.39754-3.399005 1.899444 0 5.398418 0.399883 8.39754 3.399005l330.903056 331.003026c2.999121 2.999121 3.399004 6.498096 3.399004 8.39754-0.199941 1.799473-0.599824 5.298448-3.498975 8.297569z m0 0"
                      fill="#F3DAB8"
                      p-id="8739"
                    ></path>
                    <path
                      d="M668.60412 596.425266H562.835107c-7.297862 0-13.9959-4.298741-16.995021-10.896808-2.999121-6.598067-1.899444-14.395782 2.899151-19.894171L670.203651 425.875232c6.798008-7.797716 18.494582-8.597481 26.292297-1.799473 7.797716 6.698038 8.597481 18.494582 1.899444 26.292297l-94.672264 108.968076h64.980963c10.197013 0 18.594552 8.39754 18.594552 18.594552 0.099971 10.197013-8.297569 18.494582-18.694523 18.494582z m-33.190276 51.584887l-28.09177-33.990042"
                      fill="#FEC401"
                      p-id="8740"
                    ></path>
                    <path
                      d="M635.413844 666.604706c-5.298448 0-10.696866-2.299326-14.295812-6.698038l-27.991799-33.890071c-6.498096-7.897686-5.498389-19.69423 2.399297-26.192327s19.69423-5.498389 26.192326 2.399297l27.991799 33.890072c6.498096 7.897686 5.498389 19.69423-2.399297 26.192326-3.598946 2.899151-7.697745 4.298741-11.896514 4.298741z m-22.793323-135.060432c-10.197013 0-18.594552-8.39754-18.594552-18.594552V376.189788c0-10.197013 8.39754-18.594552 18.594552-18.594552 10.197013 0 18.594552 8.39754 18.594553 18.594552v136.759934c0 10.197013-8.39754 18.594552-18.594553 18.594552z m0 0"
                      fill="#FEC401"
                      p-id="8741"
                    ></path>
                    <path
                      d="M582.829249 504.052328c-4.998536 0-9.997071-1.999414-13.695987-6.098213l-32.690423-35.589573c-6.99795-7.597774-6.398126-19.294347 1.199649-26.292298 7.597774-6.99795 19.294347-6.398126 26.292297 1.199649l32.690422 35.589573c6.99795 7.597774 6.398126 19.294347-1.199648 26.292298-3.598946 3.199063-8.197598 4.898565-12.59631 4.898564z m-94.772234 162.552378H351.896905c-10.197013 0-18.594552-8.39754-18.594552-18.594553 0-10.197013 8.39754-18.594552 18.594552-18.594552h136.16011c10.197013 0 18.594552 8.39754 18.594552 18.594552 0 10.197013-8.297569 18.594552-18.594552 18.594553z m-19.294348-48.485796h-97.571414c-12.196427 0-22.093527-9.8971-22.093528-22.093527V549.838914c0-12.196427 9.8971-22.093527 22.093528-22.093527h97.571414c12.196427 0 22.093527 9.8971 22.093527 22.093527v46.186469c0.099971 12.196427-9.8971 22.093527-22.093527 22.093527zM386.28683 580.829835h67.48023v-15.895343h-67.48023V580.829835z m84.175339-75.577858h-100.970419c-26.69218 0-48.485795-21.693644-48.485795-48.485795v-49.18559c0-26.69218 21.793615-48.485795 48.485795-48.485796h100.970419c26.69218 0 48.485795 21.793615 48.485795 48.485796V456.866152c0 26.69218-21.693644 48.385824-48.485795 48.385825zM369.591721 396.383872c-6.198184 0-11.29669 5.098506-11.29669 11.29669V456.866152c0 6.198184 5.098506 11.29669 11.29669 11.296691h100.970419c6.198184 0 11.29669-5.098506 11.29669-11.296691v-49.18559c0-6.198184-5.098506-11.29669-11.29669-11.29669h-100.970419z m0 0"
                      fill="#FEC401"
                      p-id="8742"
                    ></path>
                    <path
                      d="M482.858538 450.767939H356.695499c-10.197013 0-18.594552-8.39754-18.594552-18.594552 0-10.197013 8.39754-18.594552 18.594552-18.594553H482.858538c10.197013 0 18.594552 8.39754 18.594552 18.594553 0 10.197013-8.39754 18.594552-18.594552 18.594552z m0 0"
                      fill="#FEC401"
                      p-id="8743"
                    ></path>
                    <path
                      d="M419.677048 496.354584c-10.197013 0-18.594552-8.39754-18.594553-18.594553v-92.972762c0-10.197013 8.39754-18.594552 18.594553-18.594552 10.197013 0 18.594552 8.39754 18.594552 18.594552v92.972762c0 10.197013-8.197598 18.594552-18.594552 18.594553z m0 0"
                      fill="#FEC401"
                      p-id="8744"
                    ></path>
                    <path
                      d="M512.049985 1024c-24.392854 0-48.885678-9.297276-67.48023-27.891829L28.09177 579.630186c-37.189105-37.189105-37.189105-97.671385 0-134.86049L444.569755 28.09177c37.189105-37.189105 97.671385-37.189105 134.86049 0l416.477985 416.477985c37.189105 37.189105 37.189105 97.671385 0 134.86049L579.430245 996.108171c-18.594552 18.594552-42.987406 27.891829-67.38026 27.891829z m0-986.510983c-14.895636 0-29.791272 5.698331-41.187933 16.995021L54.384067 470.962023c-22.693352 22.693352-22.693352 59.582544 0 82.175925L470.862052 969.715904c22.693352 22.693352 59.582544 22.693352 82.175925 0l416.477985-416.477985c22.693352-22.693352 22.693352-59.582544 0-82.175925L553.037977 54.484038c-11.29669-11.396661-26.192326-16.995021-40.987992-16.995021z m0 0"
                      fill="#FF664D"
                      p-id="8745"
                    ></path>
                  </svg>
                </template>
              </div>
            </div>
          </div>
          <span class="controls-bottom-process-time">{{ totalTime }}</span>
        </div>
        <!-- 按钮栏 -->
        <div class="controls-bottom">
          <div class="controls-bottom-left">
            <!-- 播放，暂停 -->
            <button @click.stop="isPaused = !isPaused">
              <span class="bt-start">
                <template v-if="isPaused">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 28 28"
                    width="28"
                    height="28"
                    preserveAspectRatio="xMidYMid meet"
                    style="
                      width: 100%;
                      height: 100%;
                      transform: translate3d(0px, 0px, 0px);
                    "
                  >
                    <defs>
                      <clipPath id="__lottie_element_253">
                        <rect width="28" height="28" x="0" y="0"></rect>
                      </clipPath>
                    </defs>
                    <g clip-path="url(#__lottie_element_253)">
                      <g
                        style="display: none"
                        transform="matrix(1,0,0,1,24.812999725341797,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                        </g>
                      </g>
                      <g
                        style="display: none"
                        transform="matrix(1,0,0,1,14,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                        </g>
                      </g>
                      <g
                        style="display: block"
                        transform="matrix(1,0,0,1,14,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d="M0 0"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d="M0 0"
                          ></path>
                        </g>
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z"
                          ></path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </template>
                <template v-else>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 28 28"
                    width="28"
                    height="28"
                    preserveAspectRatio="xMidYMid meet"
                    style="
                      width: 100%;
                      height: 100%;
                      transform: translate3d(0px, 0px, 0px);
                    "
                  >
                    <defs>
                      <clipPath id="__lottie_element_370">
                        <rect width="28" height="28" x="0" y="0"></rect>
                      </clipPath>
                    </defs>
                    <g clip-path="url(#__lottie_element_370)">
                      <g
                        style="display: block"
                        transform="matrix(1,0,0,1,14,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                        </g>
                      </g>
                      <g
                        style="display: block"
                        transform="matrix(1,0,0,1,24.812000274658203,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-5.484000205993652,-10 C-7.953000068664551,-10 -8,-7.984000205993652 -8,-7.984000205993652 C-8,-7.984000205993652 -8.008000373840332,7.984000205993652 -8.008000373840332,7.984000205993652 C-8.008000373840332,7.984000205993652 -7.984000205993652,9.991999626159668 -5.5,9.991999626159668 C-3.0160000324249268,9.991999626159668 -3.003999948501587,7.995999813079834 -3.003999948501587,7.995999813079834 C-3.003999948501587,7.995999813079834 -2.9839999675750732,-8 -2.9839999675750732,-8 C-2.9839999675750732,-8 -3.015000104904175,-10 -5.484000205993652,-10z"
                          ></path>
                        </g>
                      </g>
                      <g
                        style="display: none"
                        transform="matrix(1,0,0,1,14.600000381469727,14)"
                        opacity="1"
                      >
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d="M0 0"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d="M0 0"
                          ></path>
                        </g>
                        <g opacity="1" transform="matrix(1,0,0,1,0,0)">
                          <path
                            fill="rgb(255,255,255)"
                            fill-opacity="1"
                            d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z"
                          ></path>
                          <path
                            stroke-linecap="butt"
                            stroke-linejoin="miter"
                            fill-opacity="0"
                            stroke-miterlimit="4"
                            stroke="rgb(255,255,255)"
                            stroke-opacity="1"
                            stroke-width="0"
                            d=" M-7.031000137329102,-10.875 C-7.031000137329102,-10.875 -8.32800006866455,-11.25 -9.42199993133545,-10.468999862670898 C-10.109999656677246,-9.906999588012695 -10,-7.992000102996826 -10,-7.992000102996826 C-10,-7.992000102996826 -10,8.015999794006348 -10,8.015999794006348 C-10,8.015999794006348 -10.125,10.241999626159668 -9,10.991999626159668 C-7.875,11.741999626159668 -5,10.031000137329102 -5,10.031000137329102 C-5,10.031000137329102 7.968999862670898,1.875 7.968999862670898,1.875 C7.968999862670898,1.875 9,1.062000036239624 9,0 C9,-1.062000036239624 7.968999862670898,-1.937999963760376 7.968999862670898,-1.937999963760376 C7.968999862670898,-1.937999963760376 -7.031000137329102,-10.875 -7.031000137329102,-10.875z"
                          ></path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </template>
              </span>
            </button>
          </div>
          <!-- 行间距（flex自动补全） -->
          <div class="controls-bottom-space"></div>
          <div class="controls-bottom-right">
            <!-- 倍速调节【Array自定义插入变速数组】 -->
            <div
              class="controls-set controls-speed"
              @mouseover.stop="controlsHover('speed')"
              @mouseleave.stop="controlsLeave('speed')"
            >
              <button>
                {{ Number(speed) == 1 ? "倍速" : String(speed.toFixed(2)) }}
              </button>
              <transition name="fade">
                <div class="controls-speed-bar" v-show="controls.speed != null">
                  <span
                    v-for="(item, i) in speeds"
                    :key="i"
                    @click.stop="speedChange(item)"
                    :class="speed == Number(item) ? 'is-choose' : ''"
                  >
                    {{ item }}
                  </span>
                </div>
              </transition>
            </div>
            <!-- 音量调节 -->
            <div
              class="controls-set"
              @mouseover.stop="controlsHover('volume')"
              @mouseleave.stop="controlsLeave('volume')"
            >
              <!-- 音量控制 -->
              <button @click.stop="volumeClick">
                <template v-if="volume == 0">
                  <span class="bt-start">
                    <svg
                      t="1611258063068"
                      viewBox="0 0 1152 1024"
                      version="1.1"
                      width="20"
                      height="20"
                      preserveAspectRatio="xMidYMid meet"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                      <path
                        d="M649.309091 342.109091c60.509091 39.563636 97.745455 107.054545 97.745454 181.527273 0 41.890909-11.636364 79.127273-32.581818 114.036363l65.163637 65.163637c37.236364-51.2 58.181818-114.036364 58.181818-179.2 0-104.727273-53.527273-200.145455-139.636364-256-20.945455-13.963636-48.872727-6.981818-62.836363 13.963636s-6.981818 46.545455 13.963636 60.509091z"
                        p-id="2354"
                        fill="#ffffff"
                      ></path>
                      <path
                        d="M754.036364 186.181818c109.381818 76.8 174.545455 200.145455 174.545454 337.454546 0 90.763636-30.254545 176.872727-81.454545 246.690909l65.163636 65.163636c69.818182-86.109091 109.381818-195.490909 109.381818-311.854545 0-165.236364-81.454545-316.509091-214.109091-411.927273-20.945455-13.963636-48.872727-9.309091-62.836363 11.636364-16.290909 18.618182-11.636364 46.545455 9.309091 62.836363zM353.745455 276.945455l97.745454-107.054546c6.981818-6.981818 18.618182-6.981818 25.6-2.327273 4.654545 2.327273 6.981818 9.309091 6.981818 13.963637v223.418182l90.763637 90.763636V181.527273c0-30.254545-13.963636-60.509091-34.909091-81.454546-44.218182-39.563636-114.036364-37.236364-153.6 6.981818l-95.418182 104.727273 62.836364 65.163637zM758.690909 856.436364c-2.327273 0-2.327273 2.327273-4.654545 2.327272-20.945455 13.963636-25.6 41.890909-11.636364 62.836364 13.963636 20.945455 41.890909 25.6 62.836364 11.636364 6.981818-4.654545 11.636364-9.309091 16.290909-13.963637l-62.836364-62.836363zM484.072727 579.490909v283.927273c0 9.309091-6.981818 18.618182-18.618182 18.618182-4.654545 0-9.309091-2.327273-13.963636-6.981819l-169.890909-188.50909c-23.272727-25.6-58.181818-41.890909-93.090909-41.89091H130.327273c-20.945455 0-37.236364-16.290909-37.236364-37.236363v-174.545455c0-20.945455 16.290909-37.236364 37.236364-37.236363H186.181818c30.254545 0 60.509091-11.636364 83.781818-32.581819L204.8 302.545455c-4.654545 2.327273-11.636364 4.654545-18.618182 4.654545H130.327273c-69.818182 0-128 55.854545-128 128v174.545455c0 69.818182 55.854545 128 128 128H186.181818c9.309091 0 20.945455 4.654545 27.927273 11.636363l169.890909 188.509091c20.945455 23.272727 48.872727 34.909091 81.454545 34.909091 60.509091 0 109.381818-48.872727 109.381819-109.381818v-193.163637l-90.763637-90.763636zM630.690909 726.109091c-4.654545 11.636364-2.327273 25.6 4.654546 39.563636 11.636364 16.290909 32.581818 23.272727 51.2 18.618182l-55.854546-58.181818zM935.563636 882.036364L137.309091 83.781818c-16.290909-16.290909-41.890909-16.290909-58.181818 0s-16.290909 41.890909 0 58.181818l800.581818 800.581819c13.963636 16.290909 41.890909 16.290909 58.181818 0 13.963636-18.618182 13.963636-41.890909-2.327273-60.509091z"
                        p-id="2355"
                        fill="#ffffff"
                      ></path>
                    </svg>
                  </span>
                </template>
                <template v-else>
                  <span class="bt-start">
                    <svg
                      t="1611258063068"
                      viewBox="0 0 1152 1024"
                      version="1.1"
                      width="20"
                      height="20"
                      preserveAspectRatio="xMidYMid meet"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                    >
                      <path
                        d="M322.24 694.464L510.08 901.12a20.032 20.032 0 0 0 34.752-13.44V136.768a20.032 20.032 0 0 0-34.752-13.44L322.24 329.92a139.968 139.968 0 0 1-103.616 45.824h-61.376a40 40 0 0 0-40 40V608.64c0 22.144 17.92 40 40 40h61.44c39.36 0 76.992 16.64 103.552 45.824z m-164.992 54.208A139.968 139.968 0 0 1 17.28 608.64V415.744c0-77.312 62.656-139.968 139.968-139.968h61.44a40 40 0 0 0 29.568-13.12l187.84-206.592a120 120 0 0 1 208.768 80.704V887.68a120 120 0 0 1-208.768 80.768l-187.84-206.656a40 40 0 0 0-29.632-13.056h-61.376z m570.048-435.456a49.984 49.984 0 0 1 54.912-83.584A337.216 337.216 0 0 1 934.72 512a337.216 337.216 0 0 1-152.512 282.368 49.984 49.984 0 0 1-54.912-83.584A237.184 237.184 0 0 0 834.752 512a237.184 237.184 0 0 0-107.456-198.784z m116.16-171.648a49.984 49.984 0 1 1 57.6-81.792A551.808 551.808 0 0 1 1136 512a551.808 551.808 0 0 1-235.008 452.224 49.984 49.984 0 1 1-57.536-81.792A451.84 451.84 0 0 0 1035.968 512a451.84 451.84 0 0 0-192.512-370.432z"
                        p-id="5168"
                        fill="#ffffff"
                      ></path>
                    </svg>
                  </span>
                </template>
              </button>
              <transition name="fade">
                <!-- <el-slider
                  class="volume-slider"
                  v-show="controls.volume != null"
                  v-model="volume"
                  vertical
                  height="200px"
                >
                </el-slider> -->
                <haxif-slider
                  class="volume-slider"
                  v-show="controls.volume != null"
                  v-model.number="volume"
                  is_demo
                  vertical
                >
                  <!-- <template #thumb>
                   {{volume}}
                 </template>  -->
                </haxif-slider>
              </transition>
            </div>
            <div class="controls-set">
              <!-- 全屏 -->
              <button @click.stop="launchFullScreen" ref="fullBtn">
                <svg
                  t="1611258063068"
                  viewBox="0 0 1024 1024"
                  version="1.1"
                  width="18"
                  height="21"
                  preserveAspectRatio="xMidYMid meet"
                  xmlns="http://www.w3.org/2000/svg"
                  xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                  <path
                    d="M351.682711 1023.999389H74.918031A74.611442 74.611442 0 0 1 0.001221 949.08258v-274.830686a18.423835 18.423835 0 0 1 18.118468-18.118468h79.395531a18.423835 18.423835 0 0 1 18.220257 18.118468v215.894772a18.322046 18.322046 0 0 0 18.118468 18.118468h217.014452A18.423835 18.423835 0 0 1 369.088654 926.281812v79.395532a17.405943 17.405943 0 0 1-17.405943 18.220256z m597.40048 0H679.850908A18.423835 18.423835 0 0 1 661.630651 1005.779133V926.281812a18.423835 18.423835 0 0 1 18.118467-18.118467h210.398159a18.423835 18.423835 0 0 0 18.118467-18.118468v-213.7572A18.423835 18.423835 0 0 1 926.282423 658.678155h79.395531a18.423835 18.423835 0 0 1 18.220257 18.220257v272.184168a74.611442 74.611442 0 0 1-74.916809 74.916809zM1005.779743 366.441526H926.282423a18.423835 18.423835 0 0 1-18.118468-18.118468v-213.7572a18.322046 18.322046 0 0 0-18.118467-18.118468h-211.721418a18.423835 18.423835 0 0 1-18.118467-18.220256V18.119078A18.423835 18.423835 0 0 1 678.32407 0.000611h270.759121a74.611442 74.611442 0 0 1 74.916809 74.916809v272.998481A18.423835 18.423835 0 0 1 1005.779743 366.441526z m-908.264523 1.526837h-79.395531A18.423835 18.423835 0 0 1 0.001221 349.340949v-274.830686A74.611442 74.611442 0 0 1 74.918031 0.000611h276.76468a18.423835 18.423835 0 0 1 18.118467 18.118467v79.395532a18.423835 18.423835 0 0 1-18.118467 18.220256h-217.828766a18.322046 18.322046 0 0 0-18.118468 18.118468v214.775091a18.220257 18.220257 0 0 1-18.220257 18.932781z"
                    p-id="4452"
                    fill="#ffffff"
                  ></path>
                </svg>
              </button>
            </div>
            <!--
            <div class="controls-set">
              <button>
                倍速
              </button>
            </div>
            <div class="controls-set">
              <button>
                倍速
              </button>
            </div> -->
          </div>
        </div>
        <div class="process-rate-h">
          <div
            class="process-rate-in"
            :style="{ '--process-rate': process }"
          ></div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import haxifSlider from "haxif-vue2-slider";
export default {
  components: {
    haxifSlider,
  },
  props: {
    /** 倍速 数组
     * @param Array
     */
    speeds: {
      type: Array,
      default: () => {
        return ["2.0", "1.5", "1.0", "0.5", "0.25"];
      },
    },
    title: {
      type: String,
      default: () => {
        return "";
      },
    },
    url: {
      type: String,
      default: () => {
        return "https://video.pearvideo.com/mp4/short/20200209/cont-1650197-14888002-hd.mp4";
      },
    },
    festival:{
      type:String,
      default:()=>{
        return 'Spring Festival'
      }
    }
  },
  data() {
    return {
      // 进度条比率
      process: 0,
      // 当前速度
      speed: 1,
      // 标记当前的播放状态
      isPaused: true,
      // 标记当前是否静音
      isMuted: false,
      // 当前播放时间
      currentTime: "00:00",
      // 总时长
      totalTime: "00:00",
      // 标记控制面板是否可见
      isShow: true,
      // 开始时间，毫秒为单位
      startTime: 0,
      // 播放器对象
      xvideo: null,
      // 播放器盒子
      videobox: null,
      // 缓冲加载中
      is_loading:false,
      //控制属性控制器-system
      controls: {
        // 显示速度控制板
        speed: null,
        // 显示音量控制板
        volume: null,
        // 拖住检测
        thumb: false,
        // 拖拽基准点
        process_max: 0,
        // 记录点击点-实时
        process_step: 0,
      },
      // 进度缓存（松手生效）
      process_cache: 0,
      // 音量
      volume: 100,
      // 全屏状态
      is_full_screen: false,
      // 按钮动画 - 全屏
      animate_full_screen_x: 20,
      animate_full_screen_y: 20,
      animation_full_screen: null,
      // 弹幕
      danmu_txt: "",
      
    };
  },
  mounted() {
    // 视频源绑定
    this.xvideo = this.$refs.xvideo;
    this.controls.process_max = this.$refs.process.offsetWidth;
    // 视频盒子绑定
    this.videobox = this.$refs.videobox;
    // 键盘按键检测
    // this.xvideo.onkeyup = this.keyDown;
    // window.onkeyup = null;
    // 节日预留
    // let nowDate = new Date();
    // let Year = nowDate.getFullYear();
    // let Month = nowDate.getMonth() + 1;
    // let Day = nowDate.getDate();
    // console.log(nowDate);
    // console.log(Year, Month, Day);
  },
  watch: {
    volume(val) {
      this.xvideo.volume = val / 100;
      // console.log(val);
    },
    //播放，暂停
    isPaused(val) {
      if (val) {
        this.xvideo.pause();
      } else {
        this.xvideo.play();
      }
    },
    process(){
      this.is_loading = false
    }
  },
  methods: {
    // 节日检测
    getFestival(e){
      if(this.festival==e){
        return true
      }
      return false
    },
    // waiting缓冲
    isLoading(e){
      console.log(e)
      this.is_loading = true
      console.log(this.is_loading);
    },
    //获取总时长
    getTotal() {
      // console.log(this.xvideo.duration);
      this.totalTime = this.timeFormat(this.xvideo.duration);
    },
    //获取当前视频播放到的时间
    timeupdate() {
      this.currentTime = this.timeFormat(this.xvideo.currentTime);
      this.process =
        Number((this.xvideo.currentTime / this.xvideo.duration) * 100) + "%";
      if (this.process == "100%") {
        this.isPaused = true;
      }
    },
    //时间格式化处理
    timeFormat(time) {
      let minute = Math.floor((time % 3600) / 60);
      let second = Math.floor(time % 60);
      minute = minute < 10 ? "0" + minute : minute;
      second = second < 10 ? "0" + second : second;
      return `${minute}:${second}`;
    },
    //按钮悬停浮窗控制器
    controlsHover(e) {
      clearTimeout(this.controls[e]);
      this.controls[e] = null;
      this.controls[e] = true;
      // this.controls[e] = true;
    },
    //按钮悬停浮窗控制器
    controlsLeave(e, wait_time = 200) {
      let that = this;
      this.controls[e] = setTimeout(function () {
        clearTimeout(that.controls[e]);
        that.controls[e] = null;
      }, wait_time);
    },
    //变速
    speedChange(e) {
      this.xvideo.playbackRate = Number(e);
      // this.controls[e] = false
      this.speed = Number(e);
    },
    // 点击进度条
    thumbClick(e) {
      let _cache = e.offsetX / e.target.offsetWidth;
      let _cache2 = _cache * 100;
      // console.log(
      //   this.xvideo.currentTime,
      //   _cache,
      //   e.offsetX,
      //   e.target.offsetWidth
      // );
      this.process = _cache2 + "%";
      this.xvideo.currentTime = Number(_cache) * Number(this.xvideo.duration);
      // this.process_cache = null
    },
    // 拖动进度条
    thumbDown(e) {
      this.xvideo.pause();
      this.isPaused = true;
      this.controls.thumb = true;
      this.controls.process_step = e.clientX;
      this.process_cache = this.xvideo.currentTime;
    },
    thumbMove(e) {
      if (this.controls.thumb) {
        let that = this;
        let del = e.clientX;
        that.process_cache +=
          Number(
            (del - that.controls.process_step) / that.controls.process_max
          ) * Number(that.xvideo.duration);
        if (that.process_cache <= 0) {
          that.process_cache = 0;
          this.xvideo.currentTime = this.process_cache;
          // that.controls.thumb = false;
        } else if (that.process_cache >= that.xvideo.duration) {
          that.process_cache = that.xvideo.duration;
          this.xvideo.currentTime = this.process_cache;
          // that.controls.thumb = false;
        } else {
          // console.log(del, that.controls.process_max, that.xvideo.currentTime);
          that.controls.process_step = e.clientX;
        }
        that.process =
          Number((that.process_cache / that.xvideo.duration) * 100) + "%";
      }
    },
    thumbUp() {
      if (this.controls.thumb) {
        this.controls.thumb = false;
        // this.isPaused = false;
        // this.xvideo.play();
        if (this.process_cache != null) {
          this.xvideo.currentTime = this.process_cache;
        }
        this.process_cache = null;
      }
    },
    // 静音变换
    volumeClick() {
      if (this.volume == 0) {
        this.volume = 50;
      } else {
        this.volume = 0;
      }
    },
    // 聚焦 focus
    focusIn(e) {
      this.$refs[e].focus();
      // console.log(e, "focus");
    },
    // 键盘按键功能
    keyDown(e) {
      let kc = e;
      // console.log(kc);
      // 常规按键监听
      switch (kc) {
        case "Space":
          this.isPaused = !this.isPaused;
          break;
        case "Right":
          this.xvideo.currentTime += this.xvideo.duration / 100;
          break;
        case "Left":
          this.xvideo.currentTime -= this.xvideo.duration / 100;
          break;
        case "Up":
          if (this.volume <= 90) {
            this.volume += 10;
          } else {
            this.volume = 100;
          }
          this.controlsHover("volume");
          this.controlsLeave("volume", 500);
          break;
        case "Down":
          if (this.volume >= 10) {
            this.volume -= 10;
          } else {
            this.volume = 0;
          }
          this.controlsHover("volume");
          this.controlsLeave("volume", 500);
          break;
        default:
          break;
      }
      // }
    },
    // 全屏功能键
    launchFullScreen() {
      // console.log("全屏");
      if (document.fullscreenElement == null) {
        // window.onkeyup = null;
        this.FullScreen();
      } else {
        this.exitFullscreen();
        // window.onkeyup = this.keyDown;
      }
      this.$refs.fullBtn.blur();
    },
    //进入全屏
    FullScreen() {
      var ele = this.$refs.videobox;
      if (ele.requestFullscreen) {
        ele.requestFullscreen();
      } else if (ele.mozRequestFullScreen) {
        ele.mozRequestFullScreen();
      } else if (ele.webkitRequestFullScreen) {
        ele.webkitRequestFullScreen();
      }
      this.is_full_screen = true;
      this.focusIn("controls");
    },
    //退出全屏
    exitFullscreen() {
      var de = document;
      if (de.exitFullscreen) {
        de.exitFullscreen();
      } else if (de.mozCancelFullScreen) {
        de.mozCancelFullScreen();
      } else if (de.webkitCancelFullScreen) {
        de.webkitCancelFullScreen();
      }
      this.is_full_screen = false;
    },
    danmuSend() {
      // let video_time = this.xvideo.currentTime;
      // console.log("video-time:", video_time, this.timeFormat(video_time));
      // console.log("txt", this.danmu_txt);
      // console.log("setting");
    },
  },
};
</script>

<style scoped>
ul,
li,
input {
  list-style: none;
}
i,
input {
  outline: none;
}
.main {
  margin: 0;
  padding: 0;
  width: fit-content;
  height: fit-content;
  outline: none;
  border: none;
  /* overflow: auto; */
}
/* 头部信息 */
.header {
  width: 100%;
  min-height: 0;
  height: fit-content;
  /* background: rgb(80, 131, 160); */
}
.title-txt {
  padding-bottom: 7px;
  font-size: 26px;
  font-weight: 600;
  text-shadow: 1px 1px 2px #00000091;
}
/* 视频盒子 */
.video-box {
  width: 638px;
  height: 447px;
  display: flex;
  vertical-align: middle;
  /* box-sizing: border-box; */
  background-color: #000000;
  position: relative;
}
/* 视频播放区 */
.video {
  width: 624px;
  height: 351px;
  margin: auto;
  display: block;
  object-fit: fill;
  /* cursor: none; */
  /* border: 1px solid #fff; */
  /* box-shadow: 0 0 2px #223322; */
}
/* 全屏状态视频播放器 */
.full-video {
  width: 98%;
  max-height: 100%;
  margin: auto;
  display: block;
  object-fit: fill;
}
video {
  width: 100%;
  max-height: 100%;
}
/* 缓冲 */
.loading-img{
  position: absolute;
  top: 50%;
  left: 50%;
  --lit-move:5px;
  transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move)));
  width: 40%;
  max-height: 100%;
  border-radius: 50%;
  filter: blur(1px);
  box-shadow: 0 0  10px #222222;
  animation: loading 15s infinite;
  /* clip-path: circle(200px 200px 50% 50%); */
}
@keyframes loading {
  0%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(5deg);
  }7.6%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(-20deg);
  }15.38%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(5deg);
  }23%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg);
  }30.76%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg) rotate(20deg);
  }46.66%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg) rotate(-5deg);
  }55.15%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(5deg);
  }61.53%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(-360deg) scale(1.2);
    box-shadow: 0 0  25px #0f0f0f;
  }61.54%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(0deg) scale(1.2);
    box-shadow: 0 0  25px #0f0f0f;
  }77.83%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(-15deg);
  }82%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg);
  }87.33%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg) rotate(20deg);
  }95.2%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotateY(180deg) rotate(-5deg);
  }100%{
    transform: translate(calc(-50% - var(--lit-move)),calc(-50% - var(--lit-move))) rotate(5deg);
  }
}
/* 控制器 */
.controls {
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  position: absolute;
  transition: all 0.3s;
  outline: none;
}
.controls:hover .controls-bottom,
.controls:hover .controls-bottom-process {
  opacity: 1;
}
/* 进度条 */
.controls-bottom-process {
  user-select: none;
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: center;
  position: absolute;
  bottom: 33px; /* 29px */
  opacity: 0;
  transition: all 0.3s;
}
.controls-bottom-process-time {
  background: #b8b8b820;
  border-radius: 5px;
  padding: 0 2px;
  color: #fff;
  opacity: 0.9;
}
.controls-bottom-process-in {
  width: 90%;
  position: relative;
  margin: 0 15px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.process-rate {
  overflow: hidden;
  position: relative;
  text-align: left;
  transform: translate(0, 2px);
  background: rgba(167, 167, 167, 0.301);
  border-radius: 2px;
}
/* mini进度条 */
.process-rate-h {
  overflow: hidden;
  position: absolute;
  text-align: left;
  bottom: -2px;
  width: 100%;
  height: 2px;
  background: #000;
  transition: all 0.3s;
}
.controls:hover .process-rate-h .process-rate-in {
  opacity: 0;
}
.process-rate-in {
  /* width: var(--process-rate, 0); */
  clip-path: ellipse(var(--process-rate) 140px at 0% 20%);
  width: 100%;
  height: 2px;
  transform: translate(0, 0);
  z-index: 99;
  background: rgb(36, 119, 187);
  transition: all 0.3s;
}
/* 拖动小按钮 */
.process-thumb {
  position: absolute;
  bottom: 0;
  top: 50%;
  transform: translate(-50%, -50%);
  width: fit-content;
  height: 18px;
  margin: 0 3px;
}
.controls-bottom {
  user-select: none;
  width: 100%;
  height: 29px;
  line-height: 22px;
  padding: 0 auto;
  position: absolute;
  bottom: 0;
  margin: 14px 0 0;
  /* box-shadow: 0 -22px 54px #797979 inset; */
  display: flex;
  justify-content: space-between;
  opacity: 0;
  background: none;
}
/* 播放控制 */
.controls-bottom-left {
  width: 36px;
  margin-left: 10px;
  vertical-align: middle;
}
.controls-bottom button {
  width: 100%;
  /* height: fit-content; */
  outline: none;
  padding: 0;
  line-height: inherit;
  text-align: inherit;
  color: inherit;
  background: none;
  border: none;
  font-size: 16px;
  font: inherit;
  font-weight: 600;
  cursor: pointer;
}
.bt-start {
  width: 34px;
  height: 22px;
  opacity: 0.9;
  display: inline-block;
  user-select: none;
  transition: fill 0.3s;
}
.bt-start:hover {
  opacity: 1;
}
.bt-start:active {
  opacity: 0.8;
}
/* 右侧控制按钮 */
.controls-bottom-right {
  display: flex;
  flex-direction: row;
}
.is-choose {
  color: rgb(90, 125, 223);
}
/* 功能键 */
.controls-set {
  margin-right: 30px;
  color: #fff;
  opacity: 0.9;
  position: relative;
  transition: all 0.3s;
}
.controls-set:hover {
  opacity: 1;
}
/* .controls-set:active{
  opacity: .8;
} */
/* 发送弹幕 */
.danmu-send input {
  box-sizing: border-box;
  outline: none;
  padding: 3px 6px;
  transform: translate(0, -2px);
}
/* 倍速bar */
.controls-speed {
  width: 40px;
  /* transition: all 2.8s; */
}
.controls-speed-bar {
  width: 80px;
  height: fit-content;
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translate(-50%, -100%);
  background: #363636b0;
  border-radius: 5px;
  opacity: 0.9;
  transition: all 0.3s;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
.controls-speed-bar span {
  text-align: center;
  display: inline-block;
  padding: 0 10px;
  width: 60px;
  height: 32px;
  line-height: 32px;
  font-size: 14px;
  font-weight: 600;
  border-radius: 5px;
  transition: all 0.3s;
}
.controls-speed-bar span:hover {
  background: #363636e3;
}
/* 音量调节 */
.volume-slider {
  position: absolute;
  left: -10px;
  transform: translate(0, -118%);
  background: #363636e3;
  border-radius: 5px;
  padding: 15px 5px;
  opacity: 0.9;
  /* opacity: 0; */
}
/* name=fade 动画过度 - 渐变消失 */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s;
}
.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {
  opacity: 0;
}
</style>
